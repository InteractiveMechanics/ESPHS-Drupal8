{#
/**
 * @file
 * Default theme implementation for the basic structure of a single Drupal page.
 *
 * Variables:
 * - logged_in: A flag indicating if user is logged in.
 * - root_path: The root path of the current page (e.g., node, admin, user).
 * - node_type: The content type for the current node, if the page is a node.
 * - head_title: List of text elements that make up the head_title variable.
 *   May contain or more of the following:
 *   - title: The title of the page.
 *   - name: The name of the site.
 *   - slogan: The slogan of the site.
 * - page_top: Initial rendered markup. This should be printed before 'page'.
 * - page: The rendered page markup.
 * - page_bottom: Closing rendered markup. This variable should be printed after
 *   'page'.
 * - db_offline: A flag indicating if the database is offline.
 * - placeholder_token: The token for generating head, css, js and js-bottom
 *   placeholders.
 *
 * @see template_preprocess_html()
 *
 * @ingroup themeable
 */
#}

<!DOCTYPE html>
<html{{ html_attributes }}>
<head>
    <head-placeholder token="{{ placeholder_token|raw }}">
    
    {% set hmtlTitle = node_type %}
    
    {% if hmtlTitle starts with "home_" %}
    	{% set hmtlTitle = head_title['title'] %}
    {% else %}
    	{% set hmtlTitle = head_title|safe_join(' | ') %}
    {% endif %}
    
    <title>{{hmtlTitle}}</title> 
    
    {{meta_tags|raw}}
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.css">


	<script type="text/javascript" src="https://code.jquery.com/jquery.min.js"></script>
	
	
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick-theme.min.css"/>
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.min.css">
	
	<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="https://use.typekit.net/vcn8cop.js"></script>
	<script>try{Typekit.load({ async: true });}catch(e){}</script>
	<script src="{{ path('<front>') }}halloween/themes/historic/js/classie.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/js/bootstrap-select.min.js"></script>
	
    <css-placeholder token="{{ placeholder_token|raw }}">
    <js-placeholder token="{{ placeholder_token|raw }}">  
    
    <style>
    
    	.js-quickedit-page-title {
	    	display:none;
    	}
    	
    	.search-page-form {
	    	display:none;
    	}

    	.search-form-page + h2 {
	    	display:none;
    	}
    	
    	.views-exposed-form {
	    	display:none;
    	}
    </style>
    
</head>
<body {{ attributes }} class="fade-in" data-spy="scroll" data-target="#artwork-scrollspy" data-offset="200">

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	
	  ga('create', 'UA-212020-4', 'auto');
	  ga('send', 'pageview');
	
	</script>
    
    <a href="#main-content" class="visually-hidden focusable">
      {{ 'Skip to main content'|t }}
    </a>
    {{ page_top }}
    {{ page }}
    {{ page_bottom }}
    <js-bottom-placeholder token="{{ placeholder_token|raw }}">
    <div id="viewer"><div id="viewer-inner"></div></div>   
    
    <!-- The Modal -->
    <div id="Attraction-Modal" class="attraction-modal">

      <!-- Modal content -->
      <div class="attraction-modal-content">
        <div class="attraction-modal-body text-center attraction-video" style="margin-bottom:-5px;">
          <iframe width="100%" height="100%" src="https://www.youtube.com/embed/AdPvP2AL3Os" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="attraction-modal-footer">
          <div class="attraction-image" style="width:200px; float:left;">
            <img src="" style="width:100%;" />
          </div>

          <div class="attraction-description" >
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod. Excepteur sint occaecat cupidatat non proident, sunt in culpa. Do eiusmod. Exc amet,</p>
          </div>

          <br style="clear:both;" />
        </div>
      </div>

    </div>

    <!-- The Modal -->
    <div id="Preview-Modal" class="attraction-modal">

      <!-- Modal content -->
      <div class="attraction-modal-content">
        <div class="attraction-modal-body text-center" style="margin-bottom:-5px;">
         <iframe src="https://player.vimeo.com/video/176338495" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
        </div>
      </div>

    </div>     
    
    
    <script>
    
    function createCookie(name,value,days) {
	    var expires = "";
	    if (days) {
	        var date = new Date();
	        date.setTime(date.getTime() + (days*24*60*60*1000));
	        expires = "; expires=" + date.toUTCString();
	    }
	    document.cookie = name + "=" + value + expires + "; path=/";
	}
	
	function readCookie(name) {
	    var nameEQ = name + "=";
	    var ca = document.cookie.split(';');
	    for(var i=0;i < ca.length;i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') c = c.substring(1,c.length);
	        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
	    }
	    return null;
	}

    
    $(function(){
	    var cookieName = readCookie('site-swticher');
	    if(cookieName) {
		    
		    if(cookieName == 'hide') {
			    $('.site-switcher-section').hide();
			    $('.show-site-switcher').show();
		    } else {
			   $('.site-switcher-section').show();
			    $('.show-site-switcher').hide(); 
		    }
		    
	    } else {
		    $('.site-switcher-section').show();
	    }

    $('.close-icon').click(function(){
	    $('.calendar-widget').removeClass('display-block');  
        $(".calendar-widget").addClass('display-none');    
    });

     var slideLeftBtn = document.querySelector('#c-button--slide-right');

    slideLeftBtn.addEventListener('click', function(e) {
        var slideLeft = new Menu({
      wrapper: '#o-wrapper',
      type: 'slide-right',
      menuOpenerClass: '.c-button',
      maskId: '#c-mask'
    });
      e.preventDefault;
      slideLeft.open();
    });

    

    $('.watch-preview').click(function(){
        var video = $(this).data('video');
        var description = $(this).data('description');
        var image = $(this).data('image');
        var title = $(this).data('title');

        //set html

        //launch modal

        // Get the modal
        var modal = document.getElementById('Preview-Modal');

        
        // Get the <span> element that closes the modal
        //var span = document.getElementsByClassName("close")[0];
        modal.style.display = "block";

        // When the user clicks on <span> (x), close the modal
        /*span.onclick = function() {
            modal.style.display = "none";
        }*/

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                $("iframe").attr("src", $("iframe").attr("src"));
            }
        }
        
        window.ontouchstart= function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                $("iframe").attr("src", $("iframe").attr("src"));
            }
        }
    });

    $('.panel-title a').click(function(){
        var hasClass = $( this ).children("span").hasClass( "glyphicon-triangle-right" );
        $(".glyphicon-triangle-bottom").addClass("glyphicon-triangle-right").removeClass("glyphicon-triangle-bottom");

        if(hasClass) {
            $( this ).children("span").addClass("glyphicon-triangle-bottom");
            $( this ).children("span").removeClass("glyphicon-triangle-right");
        } else {
            $( this ).children("span").addClass("glyphicon-triangle-right");
            $( this ).children("span").removeClass("glyphicon-triangle-bottom");
        }
    });
    
    //Activate any tooltips on the page
});

    
    </script>
    
    
    <script type="text/javascript">
		window.mobileAndTabletcheck = function() {
		  var check = false;
		  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
		  return check;
		};
		
		function isClosed() {
	        
	         var d = new Date();
	         var month = d.getMonth() + 1;
	         var day = d.getDate();
	        if( 
		        (month == 3 && day == 8) ||
	        	(month == 12 && day == 25) || 
	        	(month == 12 && day == 24) || 
	        	(month == 11 && day == getThanksgivingday()) || 
	        	(month == 1 && day == 1)
	         ) { 
		        
		        $('.hours-wrapper').text('Closed Today');
		        $('.hours-section ul li:eq(1)').text('Closed Today');
		        $('.hours-section ul li:eq(0)').html('&nbsp;');
		        
	        }
	        
        }
        
        function getThanksgivingday () {
			
			var day_of_week, first;
			year = (new Date).getFullYear();
			
			first = new Date(year, 10, 1);
			day_of_week = first.getDay();
			return 22 + (11 - day_of_week) % 7;
		};
		
		
        $(document).ready(function(){
	        isClosed();
	        
	        $('.mobile-menu-items').slideToggle();
	        
	        $('.menu-item h2').click(function(){
		        $(this).next('div').slideToggle();
	        });
	        
	        $('.email-text').keypress(function (e) {
		       
			if (e.which == 13) {
				var email = $('.email-text').val();
				addEmail(email);
			}
		});
        
        $('.btn-subscribe').click(function(e){
	       e.preventDefault();
	       
	       var email = $('.email-text').val();
	       addEmail(email);
        });
        
        
		
		function addEmail(email) {
			if(email) {
	       		var url = "https://www.easternstate.org/newsletter/data/1/examples/add-email.php?email=" + email;
	       		
			    $('.error-newsletter').show();
	       		$('.error-newsletter').html("<img src='{{front_page}}themes/tbtw/assets/loading.gif' />");
	       		
	       		$.ajax({
		            type: 'GET',
		            url: url,
		            success: function (msg) {
		
		                if(msg == "true") {
			                $('.error-newsletter').text("You are subscribed. Thanks!");
		                } else {
			                $('.error-newsletter').text("You're already subscribed. Thanks!");
		                }
		
		            },
		            error: function (request, status, error) {
						$('.error-newsletter').text("An error has occured, please try again later.");
		            }
		        });
		   	}
		}
	        
	        $('.dropdown-toggle').click(function(event){
			     event.stopPropagation();
			 });
			
			var active_link_arr = $('.navbar-right li.active').parent().parent().find('a');
			
			if(active_link_arr) {
				if(active_link_arr.length > 0) {
					var item = active_link_arr[0];
					item.className += " unerline_active";
					console.log(item.innerText);
					$('.breadcrumb li:eq(0) a').text(item.innerText);
				}
			}
			
			var scroll_start = 0;
			var startchange = $('main');
			var offset = startchange.offset();
			if (startchange.length){
				$(document).scroll(function() { 
					scroll_start = 100;
					if(scroll_start > offset.top) {
						$("header.navbar").addClass('navbar-fixed-top');
						
						if(!mobileAndTabletcheck()) {
							$("header.navbar").addClass('navbar-fixed-top-desktop');	
						}
						
						$("header.navbar").css('background-color', '#F9F5EF');
       				} else {
	       				$("header.navbar").removeClass('navbar-fixed-top');
	       				if(!mobileAndTabletcheck()) {
							$("header.navbar").removeClass('navbar-fixed-top-desktop');	
						}
       				}
   				});
    		}
    		
    		
    		$('.mobile-buy-now').click(function(){
	    		var path = $(this).data('path');
	    		var url = window.location.origin + path;
				
				window.location.replace(url);
    		});
    		
        });
    </script>
    
    
    
    
</body>
</html>


